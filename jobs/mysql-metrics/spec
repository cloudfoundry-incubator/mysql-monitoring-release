---
name: mysql-metrics

templates:
  metric-mapping-config.yml.erb: config/metric-mapping-config.yml
  mysql-metrics-config.yml.erb: config/mysql-metrics-config.yml
  mysql-metrics_ctl.sh.erb: bin/mysql-metrics_ctl

packages:
- mysql-metrics

properties:
  mysql-metrics.username:
    description: "database username for mysql metrics"
    default: mysql-metrics
  mysql-metrics.password:
    description: "database password for mysql metrics"
  mysql-metrics.galera_metrics_enabled:
    description: "Boolean on whether to record galera-related metrics"
    default: true
  mysql-metrics.metrics_frequency:
    description: "interval to poll metrics in seconds"
    default: 30
  mysql-metrics.minimum_metrics_frequency:
    description: "internal property: enforce minimum bound for metrics"
    default: 10
  mysql-metrics.origin:
    description: "origin tag when metrics are emitted"
    default: p-mysql
  mysql-metrics.leader_follower_enabled:
    description: "enable leader follower releated metrics"
    default: false
  mysql-metrics.heartbeat_database:
    description: "schema where heartbeat table exists"
    default: "replication_monitoring"
  mysql-metrics.heartbeat_table:
    description: "table where heartbeat data is stored"
    default: "heartbeat"
