---
name: mysql-metrics

templates:
  mysql-metrics-config.yml.erb: config/mysql-metrics-config.yml
  mysql-metrics_ctl.sh.erb: bin/mysql-metrics_ctl

packages:
- mysql-metrics

consumes:
- name: broker
  type: broker
  optional: true
- name: proxy
  type: proxy
  optional: true
- name: mysql
  type: mysql

properties:
  mysql-metrics.username:
    description: "database username for mysql metrics"
    default: mysql-metrics
  mysql-metrics.password:
    description: "database password for mysql metrics"
  mysql-metrics.host:
    description: "hostname for accessing mysql"
  mysql-metrics.metrics_frequency:
    description: "interval to poll metrics in seconds"
    default: 30
  mysql-metrics.minimum_metrics_frequency:
    description: "internal property: enforce minimum bound for metrics"
    default: 10
  mysql-metrics.origin:
    description: "origin tag when metrics are emitted"
    default: p-mysql
  mysql-metrics.heartbeat_database:
    description: "schema where heartbeat table exists"
    default: "replication_monitoring"
  mysql-metrics.heartbeat_table:
    description: "table where heartbeat data is stored"
    default: "heartbeat"
  mysql-metrics.leader_follower_metrics_enabled:
    description: "enable leader follower metrics"
    default: false
  mysql-metrics.galera_metrics_enabled:
    description: "enabled galera metrics"
    default: true
  mysql-metrics.mysql_metrics_enabled:
    description: "enable mysql metrics"
    default: true
  mysql-metrics.disk_metrics_enabled:
    description: "enable disk metrics"
    default: true
  mysql-metrics.broker_metrics_enabled:
    description: "enable broker metrics"
    default: false
