<%
  def switchboard_urls
    count = p('mysql-monitoring.replication-canary.switchboard_count')
    domain = p('domain')

    count.times.map{ |i| "https://proxy-#{i}-p-mysql.#{domain}" }
  end
%>---
NotifyOnly: <%= p('mysql-monitoring.notify_only') %>
WriteReadDelay: <%= p('mysql-monitoring.replication-canary.write_read_delay') %>
PidFile: /var/vcap/sys/run/replication-canary/replication-canary.pid
MySQL:
  ClusterIPs: <%= p('mysql-monitoring.replication-canary.cluster_ips').compact %>
  Port: <%= p('mysql-monitoring.replication-canary.mysql_port') %>
Canary:
  Database: <%= p('mysql-monitoring.replication-canary.canary_database') %>
  Username: <%= p('mysql-monitoring.replication-canary.canary_username') %>
  Password: <%= p('mysql-monitoring.replication-canary.canary_password') %>
Notifications:
  AdminClientUsername: <%= p('mysql-monitoring.replication-canary.uaa_admin_client_username') %>
  AdminClientSecret: <%= p('mysql-monitoring.replication-canary.uaa_admin_client_secret') %>
  ClientUsername: <%= p('mysql-monitoring.replication-canary.notifications_client_username') %>
  ClientSecret: <%= p('mysql-monitoring.replication-canary.notifications_client_secret') %>
  NotificationsDomain: notifications.<%= p('domain') %>
  UAADomain: uaa.<%= p('domain') %>
  ToAddress: <%= p('mysql-monitoring.recipient_email') %>
Switchboard:
  Domains: <%= JSON.generate(switchboard_urls) %>
  Username: <%= p('mysql-monitoring.replication-canary.switchboard_username') %>
  Password: <%= p('mysql-monitoring.replication-canary.switchboard_password') %>
